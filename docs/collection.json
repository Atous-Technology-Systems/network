{
  "info": {
    "name": "ATous Secure Network API Collection",
    "description": "Collection completa para testar todas as funcionalidades do sistema ATous Secure Network via endpoints REST e WebSockets. Esta collection inclui todos os endpoints disponÃ­veis na aplicaÃ§Ã£o, com exemplos de payloads, testes automatizados e documentaÃ§Ã£o detalhada.",
    "version": "4.0.0",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://127.0.0.1:8000",
      "type": "string",
      "description": "URL base do servidor ATous Secure Network"
    },
    {
      "key": "admin_api_key",
      "value": "dev-admin",
      "type": "string",
      "description": "Chave de API para autenticaÃ§Ã£o admin"
    },
    {
      "key": "jwt_token",
      "value": "your-jwt-token-here",
      "type": "string",
      "description": "Token JWT para autenticaÃ§Ã£o Bearer (quando implementado)"
    },
    {
      "key": "timestamp",
      "value": "{{$timestamp}}",
      "type": "string",
      "description": "Timestamp dinÃ¢mico para requisiÃ§Ãµes"
    }
  ],
  "item": [
    {
      "name": "ðŸ“– DocumentaÃ§Ã£o e InstruÃ§Ãµes",
      "item": [
        {
          "name": "ðŸ“‹ Como Usar Esta Collection",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/",
              "host": ["{{base_url}}"],
              "path": [""]
            },
            "description": "## ðŸš€ Como Usar Esta Collection\n\n### ðŸ“‹ PrÃ©-requisitos\n1. **Servidor ATous**: Certifique-se de que o servidor esteja rodando em `http://127.0.0.1:8000`\n2. **Postman**: VersÃ£o 8.0 ou superior\n3. **VariÃ¡veis**: Configure as variÃ¡veis de ambiente se necessÃ¡rio\n\n### ðŸ”§ ConfiguraÃ§Ã£o Inicial\n1. **Importe a collection** no Postman\n2. **Configure as variÃ¡veis**:\n   - `base_url`: URL do servidor (padrÃ£o: http://127.0.0.1:8000)\n   - `admin_api_key`: Chave de API admin (padrÃ£o: dev-admin)\n3. **Execute o teste de conectividade** primeiro\n\n### ðŸ“Š Estrutura da Collection\n- **ðŸ  Sistema Principal**: Endpoints bÃ¡sicos e documentaÃ§Ã£o\n- **ðŸ¥ Health Check**: VerificaÃ§Ã£o de saÃºde dos sistemas\n- **ðŸ” Admin**: Interface administrativa (MVP)\n- **ðŸŒ Discovery**: Sistema de descoberta de nÃ³s\n- **ðŸ“¡ Relay**: Sistema de retransmissÃ£o\n- **ðŸ¤– Agents**: Gerenciamento de agentes\n- **ðŸ“‹ Policies**: Gerenciamento de polÃ­ticas\n- **ðŸ”’ Presets de SeguranÃ§a**: ConfiguraÃ§Ãµes de seguranÃ§a\n- **ðŸ” Criptografia**: Endpoints de criptografia\n- **ðŸŒ WebSocket**: ComunicaÃ§Ã£o em tempo real\n- **ðŸ§ª Testes de Carga**: Performance e stress tests\n\n### ðŸŽ¯ Ordem Recomendada de Testes\n1. **Conectividade**: `/health`\n2. **Status Geral**: `/api/info`\n3. **Admin**: `/v1/admin/overview`\n4. **Funcionalidades EspecÃ­ficas**: Conforme necessÃ¡rio\n\n### ðŸ” Interpretando Respostas\n- **200**: Sucesso\n- **400**: Erro de requisiÃ§Ã£o\n- **401**: NÃ£o autorizado\n- **403**: Bloqueado por seguranÃ§a\n- **429**: Rate limit atingido\n- **500**: Erro interno do servidor\n- **503**: ServiÃ§o indisponÃ­vel\n\n### ðŸ›¡ï¸ Recursos de SeguranÃ§a\n- **Rate Limiting**: ProteÃ§Ã£o contra spam\n- **Input Validation**: ValidaÃ§Ã£o de entrada\n- **DDoS Protection**: ProteÃ§Ã£o contra ataques\n- **Presets de SeguranÃ§a**: ConfiguraÃ§Ãµes adaptÃ¡veis\n\n### ðŸ“ Logs e Debug\nTodos os requests incluem logs automÃ¡ticos no console do Postman para facilitar o debug."
          }
        },
        {
          "name": "ðŸ”§ Teste de Conectividade",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/health",
              "host": ["{{base_url}}"],
              "path": ["health"]
            },
            "description": "**ðŸŽ¯ Execute este teste primeiro!**\n\nTeste bÃ¡sico de conectividade para verificar se o servidor estÃ¡ respondendo. Deve retornar status de saÃºde dos sistemas.\n\n**Resposta esperada:**\n```json\n{\n  \"status\": \"healthy\",\n  \"systems\": {\n    \"abiss\": {\"status\": \"healthy\"},\n    \"nnis\": {\"status\": \"healthy\"}\n  }\n}\n```\n\n**Troubleshooting:**\n- Se falhar, verifique se o servidor estÃ¡ rodando\n- Confirme a URL base nas variÃ¡veis\n- Verifique firewall/proxy"
          }
        }
      ]
    },
    {
      "name": "ðŸ  Sistema Principal",
      "item": [
        {
          "name": "Root - InformaÃ§Ãµes da API",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/",
              "host": ["{{base_url}}"],
              "path": [""]
            },
            "description": "Endpoint raiz com informaÃ§Ãµes bÃ¡sicas da API e lista de endpoints disponÃ­veis"
          }
        },
        {
          "name": "DocumentaÃ§Ã£o Swagger",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/docs",
              "host": ["{{base_url}}"],
              "path": ["docs"]
            },
            "description": "Interface Swagger UI para documentaÃ§Ã£o interativa da API"
          }
        },
        {
          "name": "DocumentaÃ§Ã£o ReDoc",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/redoc",
              "host": ["{{base_url}}"],
              "path": ["redoc"]
            },
            "description": "Interface ReDoc para documentaÃ§Ã£o da API"
          }
        },
        {
          "name": "OpenAPI Schema",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/openapi.json",
              "host": ["{{base_url}}"],
              "path": ["openapi.json"]
            },
            "description": "Schema OpenAPI em formato JSON"
          }
        }
      ]
    },
    {
      "name": "ðŸ¥ Health Check",
      "item": [
        {
          "name": "Health Check Principal",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/health",
              "host": ["{{base_url}}"],
              "path": ["health"]
            },
            "description": "VerificaÃ§Ã£o de saÃºde dos sistemas com mÃ©tricas detalhadas incluindo ABISS, NNIS e Model Manager"
          }
        },
        {
          "name": "Status de SeguranÃ§a",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/security/status",
              "host": ["{{base_url}}"],
              "path": ["api", "security", "status"]
            },
            "description": "Status dos sistemas de seguranÃ§a ABISS e NNIS"
          }
        },
        {
          "name": "MÃ©tricas do Sistema",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/metrics",
              "host": ["{{base_url}}"],
              "path": ["api", "metrics"]
            },
            "description": "MÃ©tricas detalhadas do sistema incluindo uso de CPU, memÃ³ria e estatÃ­sticas de seguranÃ§a"
          }
        }
      ]
    },
    {
      "name": "ðŸ” Admin (MVP)",
      "item": [
        {
          "name": "VisÃ£o Geral do Sistema",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Admin-Api-Key",
                "value": "{{admin_api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v1/admin/overview",
              "host": ["{{base_url}}"],
              "path": ["v1", "admin", "overview"]
            },
            "description": "VisÃ£o geral do sistema administrativo com status dos componentes principais"
          }
        },
        {
          "name": "Eventos do Sistema",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Admin-Api-Key",
                "value": "{{admin_api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v1/admin/events",
              "host": ["{{base_url}}"],
              "path": ["v1", "admin", "events"]
            },
            "description": "Lista os Ãºltimos eventos do sistema (requer autenticaÃ§Ã£o admin)"
          }
        },
        {
          "name": "Registrar Evento Admin",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-Admin-Api-Key",
                "value": "{{admin_api_key}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"type\": \"system_check\",\n  \"payload\": {\n    \"component\": \"admin_panel\",\n    \"action\": \"status_check\",\n    \"timestamp\": \"{{timestamp}}\"\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/admin/events",
              "host": ["{{base_url}}"],
              "path": ["v1", "admin", "events"]
            },
            "description": "Registra um novo evento administrativo no sistema"
          }
        },
        {
          "name": "Status de SeguranÃ§a",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/security/status",
              "host": ["{{base_url}}"],
              "path": ["api", "security", "status"]
            },
            "description": "Status dos sistemas de seguranÃ§a ABISS e NNIS"
          }
        }
      ]
    },
    {
      "name": "ðŸŒ Discovery",
      "item": [
        {
          "name": "Buscar ServiÃ§os por Nome",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/v1/discovery/services?name=abiss",
              "host": ["{{base_url}}"],
              "path": ["v1", "discovery", "services"],
              "query": [
                {
                  "key": "name",
                  "value": "abiss",
                  "description": "Nome do serviÃ§o a buscar"
                }
              ]
            },
            "description": "Busca agentes que fornecem um serviÃ§o especÃ­fico"
          }
        },
        {
          "name": "Registrar Novo NÃ³",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"agent_id\": \"node_001\",\n  \"services\": [\n    {\"name\": \"abiss\"},\n    {\"name\": \"nnis\"},\n    {\"name\": \"lora\"}\n  ],\n  \"addresses\": {\n    \"local\": [\"192.168.1.100:8000\"],\n    \"lan\": [\"192.168.1.100:8000\"],\n    \"wan\": []\n  },\n  \"ttl\": 60\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/discovery/register",
              "host": ["{{base_url}}"],
              "path": ["v1", "discovery", "register"]
            },
            "description": "Registra um novo nÃ³ na rede de descoberta"
          }
        },
        {
          "name": "Resolver EndereÃ§os",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/v1/discovery/resolve?name=abiss&pref=local,lan,wan",
              "host": ["{{base_url}}"],
              "path": ["v1", "discovery", "resolve"],
              "query": [
                {
                  "key": "name",
                  "value": "abiss",
                  "description": "Nome do serviÃ§o a resolver"
                },
                {
                  "key": "pref",
                  "value": "local,lan,wan",
                  "description": "PreferÃªncia de escopo (local,lan,wan)"
                }
              ]
            },
            "description": "Resolve endereÃ§os de um serviÃ§o especÃ­fico com preferÃªncia de escopo"
          }
        },
        {
          "name": "Detalhes do Agente",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/v1/discovery/agents/node_001",
              "host": ["{{base_url}}"],
              "path": ["v1", "discovery", "agents", "node_001"]
            },
            "description": "ObtÃ©m detalhes completos de um agente especÃ­fico"
          }
        }
      ]
    },
    {
      "name": "ðŸ“¡ Relay",
      "item": [
        {
          "name": "Heartbeat do Agente",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"agent_id\": \"node_001\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/relay/heartbeat",
              "host": ["{{base_url}}"],
              "path": ["v1", "relay", "heartbeat"]
            },
            "description": "Registra heartbeat de um agente no sistema de relay"
          }
        },
        {
          "name": "Enviar Mensagem via Relay",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"from\": \"node_001\",\n  \"to\": \"node_002\",\n  \"payload\": {\n    \"message\": \"Hello from node_001\",\n    \"priority\": \"normal\",\n    \"timestamp\": \"{{timestamp}}\"\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/relay/send",
              "host": ["{{base_url}}"],
              "path": ["v1", "relay", "send"]
            },
            "description": "Envia uma mensagem atravÃ©s do sistema de relay"
          }
        },
        {
          "name": "Consultar Mensagens",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/v1/relay/poll?agent_id=node_001",
              "host": ["{{base_url}}"],
              "path": ["v1", "relay", "poll"],
              "query": [
                {
                  "key": "agent_id",
                  "value": "node_001",
                  "description": "ID do agente para consultar mensagens"
                }
              ]
            },
            "description": "Consulta mensagens pendentes para um agente especÃ­fico"
          }
        }
      ]
    },
    {
      "name": "ðŸ¤– Agents",
      "item": [
        {
          "name": "Enrolar Agente",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"device_info\": {\n    \"model\": \"agent_001\",\n    \"platform\": \"linux\",\n    \"location\": \"datacenter-1\"\n  },\n  \"attestation\": null,\n  \"csr_pem\": \"-----BEGIN CERTIFICATE REQUEST-----\\nMIICvDCCAaQCAQAwdzELMAkGA1UEBhMCVVMxDTALBgNVBAgMBFV0YWgxDzANBgNV\\nBAcMBlByb3ZvMQ8wDQYDVQQKDAZCeVVEaXQxDzANBgNVBAsMBlNlY3VyaXR5MQ0w\\nCwYDVQQDDARUZXN0MSAwHgYJKoZIhvcNAQkBFhF0ZXN0QGV4YW1wbGUuY29tMIIB\\nIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA...\\n-----END CERTIFICATE REQUEST-----\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/agents/enroll",
              "host": ["{{base_url}}"],
              "path": ["v1", "agents", "enroll"]
            },
            "description": "Registra um novo agente no sistema"
          }
        },
        {
          "name": "Heartbeat do Agente",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"version\": \"1.0.0\",\n  \"services\": [\"abiss\", \"nnis\", \"lora\"],\n  \"metrics\": {\n    \"cpu_usage\": 45.2,\n    \"memory_usage\": 67.8,\n    \"network_latency\": 12.5\n  },\n  \"risk_score\": 0.15\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/agents/agent_001/heartbeat",
              "host": ["{{base_url}}"],
              "path": ["v1", "agents", "agent_001", "heartbeat"]
            },
            "description": "Envia heartbeat de um agente especÃ­fico"
          }
        }
      ]
    },
    {
      "name": "ðŸ“‹ Policies",
      "item": [
        {
          "name": "PolÃ­ticas Ativas",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/v1/policies/active?agent_id=agent_001",
              "host": ["{{base_url}}"],
              "path": ["v1", "policies", "active"],
              "query": [
                {
                  "key": "agent_id",
                  "value": "agent_001",
                  "description": "ID do agente para consultar polÃ­ticas"
                }
              ]
            },
            "description": "Lista as polÃ­ticas de seguranÃ§a atualmente ativas para um agente especÃ­fico"
          }
        }
      ]
    },
    {
      "name": "ðŸ”’ SeguranÃ§a AvanÃ§ada",
      "item": [
        {
          "name": "Status NNIS",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/security/nnis/status",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "security", "nnis", "status"]
            },
            "description": "Status do sistema de seguranÃ§a NNIS"
          }
        },
        {
          "name": "RelatÃ³rio de SeguranÃ§a",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/security/security-report",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "security", "security-report"]
            },
            "description": "RelatÃ³rio detalhado de seguranÃ§a do sistema"
          }
        },
        {
          "name": "InteligÃªncia de AmeaÃ§as",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/security/threat-intelligence",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "security", "threat-intelligence"]
            },
            "description": "InformaÃ§Ãµes sobre ameaÃ§as detectadas"
          }
        }
      ]
    },
    {
      "name": "ðŸ“Š API Info e MÃ©tricas",
      "item": [
        {
          "name": "InformaÃ§Ãµes da API",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/info",
              "host": ["{{base_url}}"],
              "path": ["api", "info"]
            },
            "description": "InformaÃ§Ãµes detalhadas da API, recursos disponÃ­veis e endpoints"
          }
        },
        {
          "name": "Status de SeguranÃ§a da API",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/security/status",
              "host": ["{{base_url}}"],
              "path": ["api", "security", "status"]
            },
            "description": "Status dos sistemas de seguranÃ§a com informaÃ§Ãµes detalhadas"
          }
        },
        {
          "name": "MÃ©tricas do Sistema",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/metrics",
              "host": ["{{base_url}}"],
              "path": ["api", "metrics"]
            },
            "description": "MÃ©tricas detalhadas do sistema incluindo uso de CPU, memÃ³ria e estatÃ­sticas de seguranÃ§a"
          }
        }
      ]
    },
    {
      "name": "ðŸ” Criptografia",
      "item": [
        {
          "name": "Criptografar via /api/crypto/encrypt",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"message\": \"Dados confidenciais para criptografar\",\n  \"algorithm\": \"AES-256\",\n  \"key_id\": \"crypto-key-001\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/crypto/encrypt",
              "host": ["{{base_url}}"],
              "path": ["api", "crypto", "encrypt"]
            },
            "description": "Endpoint de criptografia via /api/crypto/encrypt - Criptografa dados usando algoritmos seguros"
          }
        },
        {
          "name": "Criptografar via /api/security/encrypt",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"message\": \"Dados de seguranÃ§a para criptografar\",\n  \"algorithm\": \"AES-256\",\n  \"key_id\": \"security-key-001\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/security/encrypt",
              "host": ["{{base_url}}"],
              "path": ["api", "security", "encrypt"]
            },
            "description": "Endpoint de criptografia via /api/security/encrypt - Criptografia focada em seguranÃ§a"
          }
        },
        {
          "name": "Criptografar via /encrypt",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"message\": \"Dados simples para criptografar\",\n  \"algorithm\": \"AES-256\",\n  \"key_id\": \"simple-key-001\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/encrypt",
              "host": ["{{base_url}}"],
              "path": ["encrypt"]
            },
            "description": "Endpoint de criptografia simples via /encrypt - Interface simplificada"
          }
        }
      ]
    },
    {
      "name": "ðŸŒ WebSocket Endpoints",
      "item": [
        {
          "name": "WebSocket Principal (/ws)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "ws://127.0.0.1:8000/ws",
              "protocol": "ws",
              "host": ["127.0.0.1"],
              "port": "8000",
              "path": ["ws"]
            },
            "description": "Endpoint WebSocket principal para comunicaÃ§Ã£o em tempo real. Aceita mensagens JSON e texto simples, retornando echo das mensagens recebidas."
          }
        },
        {
          "name": "WebSocket API (/api/ws)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "ws://127.0.0.1:8000/api/ws",
              "protocol": "ws",
              "host": ["127.0.0.1"],
              "port": "8000",
              "path": ["api", "ws"]
            },
            "description": "Endpoint WebSocket da API para comunicaÃ§Ã£o estruturada. Ideal para integraÃ§Ãµes que precisam de comunicaÃ§Ã£o bidirecional."
          }
        },
        {
          "name": "WebSocket GenÃ©rico (/websocket)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "ws://127.0.0.1:8000/websocket",
              "protocol": "ws",
              "host": ["127.0.0.1"],
              "port": "8000",
              "path": ["websocket"]
            },
            "description": "Endpoint WebSocket genÃ©rico para compatibilidade com diferentes clientes WebSocket."
          }
        }
      ]
    },
    {
      "name": "ðŸ§ª Testes de Carga e Performance",
      "item": [
        {
          "name": "Teste de Rate Limiting",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/health",
              "host": ["{{base_url}}"],
              "path": ["health"]
            },
            "description": "Execute mÃºltiplas vezes rapidamente para testar rate limiting. O sistema deve bloquear requisiÃ§Ãµes excessivas com status 429."
          }
        },
        {
          "name": "Teste de Payload Grande",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"large_data\": \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\",\n  \"repeated_field\": \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\n  \"test_type\": \"large_payload\",\n  \"timestamp\": \"{{timestamp}}\",\n  \"request_id\": \"{{$randomUUID}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/v1/admin/events",
              "host": ["{{base_url}}"],
              "path": ["v1", "admin", "events"]
            },
            "description": "Testa o sistema com payload grande para verificar limites de tamanho e proteÃ§Ã£o contra DDoS"
          }
        }
      ]
    },
    {
      "name": "ðŸ”§ UtilitÃ¡rios e Debug",
      "item": [
        {
          "name": "Verificar Tempo de Resposta",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/metrics",
              "host": ["{{base_url}}"],
              "path": ["api", "metrics"]
            },
            "description": "Verifica mÃ©tricas de performance e tempo de resposta do sistema"
          }
        },
        {
          "name": "Teste de Headers Customizados",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Test-Header",
                "value": "PostmanTest",
                "type": "text"
              },
              {
                "key": "X-Request-ID",
                "value": "{{$randomUUID}}",
                "type": "text"
              },
              {
                "key": "User-Agent",
                "value": "ATous-Test-Client/1.0",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/",
              "host": ["{{base_url}}"],
              "path": [""]
            },
            "description": "Testa como o sistema processa headers customizados"
          }
        }
      ]
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{jwt_token}}",
        "type": "string"
      }
    ]
  },
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Script para executar antes de cada requisiÃ§Ã£o",
          "console.log('ðŸš€ Executando requisiÃ§Ã£o para:', pm.request.url.toString());",
          "",
          "// Adicionar timestamp dinÃ¢mico",
          "pm.globals.set('timestamp', new Date().toISOString());",
          "",
          "// Adicionar ID Ãºnico para cada requisiÃ§Ã£o",
          "pm.globals.set('requestId', pm.variables.replaceIn('{{$randomUUID}}'));",
          "",
          "// Log de informaÃ§Ãµes da requisiÃ§Ã£o",
          "console.log('ðŸ“… Timestamp:', pm.globals.get('timestamp'));",
          "console.log('ðŸ†” Request ID:', pm.globals.get('requestId'));",
          "",
          "// Verificar se Ã© um endpoint de seguranÃ§a",
          "const url = pm.request.url.toString();",
          "if (url.includes('/security/') || url.includes('/admin/')) {",
          "    console.log('ðŸ›¡ï¸ Endpoint de seguranÃ§a/admin detectado');",
          "}",
          "",
          "// Verificar se Ã© um WebSocket",
          "if (url.startsWith('ws://') || url.startsWith('wss://')) {",
          "    console.log('ðŸŒ ConexÃ£o WebSocket detectada');",
          "}"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Testes automÃ¡ticos para todas as requisiÃ§Ãµes",
          "pm.test('âœ… Status code nÃ£o Ã© 500 (erro interno)', function () {",
          "    pm.expect(pm.response.code).to.not.equal(500);",
          "});",
          "",
          "pm.test('âš¡ Tempo de resposta menor que 5 segundos', function () {",
          "    pm.expect(pm.response.responseTime).to.be.below(5000);",
          "});",
          "",
          "pm.test('ðŸ“„ Resposta tem Content-Type vÃ¡lido', function () {",
          "    const contentType = pm.response.headers.get('Content-Type');",
          "    if (contentType) {",
          "        pm.expect(contentType).to.match(/application\\/json|text\\/html|text\\/plain/);",
          "    }",
          "});",
          "",
          "// Teste especÃ­fico para endpoints JSON",
          "if (pm.response.headers.get('Content-Type') && pm.response.headers.get('Content-Type').includes('application/json')) {",
          "    pm.test('ðŸ” Resposta JSON tem timestamp', function () {",
          "        try {",
          "            const jsonData = pm.response.json();",
          "            if (jsonData.timestamp) {",
          "                pm.expect(jsonData.timestamp).to.be.a('string');",
          "                pm.expect(jsonData.timestamp).to.match(/\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}/);",
          "            }",
          "        } catch (e) {",
          "            console.log('âš ï¸ NÃ£o foi possÃ­vel parsear JSON ou timestamp nÃ£o encontrado');",
          "        }",
          "    });",
          "",
          "    pm.test('ðŸ” Resposta JSON tem estrutura vÃ¡lida', function () {",
          "        try {",
          "            const jsonData = pm.response.json();",
          "            pm.expect(jsonData).to.be.an('object');",
          "        } catch (e) {",
          "            console.log('âš ï¸ Resposta nÃ£o Ã© um JSON vÃ¡lido');",
          "        }",
          "    });",
          "}",
          "",
          "// Teste para endpoints de admin",
          "const url = pm.request.url.toString();",
          "if (url.includes('/admin/')) {",
          "    pm.test('ðŸ” Endpoint admin respondeu adequadamente', function () {",
          "        pm.expect(pm.response.code).to.be.oneOf([200, 201, 400, 401, 403, 429]);",
          "    });",
          "}",
          "",
          "// Teste para rate limiting",
          "if (pm.response.code === 429) {",
          "    pm.test('â±ï¸ Rate limiting ativo - resposta adequada', function () {",
          "        pm.expect(pm.response.code).to.equal(429);",
          "        console.log('ðŸš« Rate limit atingido - sistema funcionando corretamente');",
          "    });",
          "}",
          "",
          "// Teste para bloqueios de seguranÃ§a",
          "if (pm.response.code === 403) {",
          "    pm.test('ðŸš« Bloqueio de seguranÃ§a - resposta adequada', function () {",
          "        pm.expect(pm.response.code).to.equal(403);",
          "        console.log('ðŸ›¡ï¸ RequisiÃ§Ã£o bloqueada por seguranÃ§a - sistema funcionando');",
          "    });",
          "}",
          "",
          "// Log detalhado da resposta para debug",
          "console.log('ðŸ“Š Status da resposta:', pm.response.status);",
          "console.log('â±ï¸ Tempo de resposta:', pm.response.responseTime + 'ms');",
          "console.log('ðŸ“ Tamanho da resposta:', pm.response.responseSize + ' bytes');",
          "",
          "// Log de headers importantes",
          "const importantHeaders = ['Content-Type', 'Content-Length', 'X-RateLimit-Remaining', 'X-Request-ID'];",
          "importantHeaders.forEach(header => {",
          "    const value = pm.response.headers.get(header);",
          "    if (value) {",
          "        console.log(`ðŸ“‹ ${header}:`, value);",
          "    }",
          "});",
          "",
          "// Salvar mÃ©tricas para relatÃ³rio",
          "if (!pm.globals.get('testMetrics')) {",
          "    pm.globals.set('testMetrics', JSON.stringify([]));",
          "}",
          "",
          "const metrics = JSON.parse(pm.globals.get('testMetrics'));",
          "metrics.push({",
          "    url: pm.request.url.toString(),",
          "    method: pm.request.method,",
          "    status: pm.response.code,",
          "    responseTime: pm.response.responseTime,",
          "    timestamp: new Date().toISOString()",
          "});",
          "",
          "pm.globals.set('testMetrics', JSON.stringify(metrics));"
        ]
      }
    }
  ]
}
